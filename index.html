<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <link rel="stylesheet" href="style.css" />
  <script
    src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"
    type="text/javascript"
  ></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
  <body>
    <header id="header">
      <img src="./src/Logo.png" alt="Logo cowala" />
      <img src="./src/Cowala.png" alt="Logo cowala2" />
    </header>

    <form action="">
      <div class="container">
        <label>Nome : </label>
        <input type="text" name="nome" id="nome" required />

        <div class="div">
          <label>Profissão : </label>
          <input
            class="inputFul"
            type="text"
            id="profissao"
            name="profissao"
            required
          />
        </div>

        <div class="div">
          <label>Celular : </label>
          <input type="text" name="celular" id="celular" required />
        </div>

        <div class="div div2">
          <label>Meu IP : </label>
          <input type="text" id="ip" name="ip" />
        </div>
        <a onclick="fazerRequisicao()" class="buttonS"> Encontrar IP </a>
        <div id="btnn">
          <a onclick="salvar()" class="buttonP">Salvar</a>
          <button type="reset" class="buttonP">Limpar</button>
        </div>
      </div>
    </form>

    <script>
      $('#telefone, #celular').mask('(00) 0000-0000')
      $(document).ready(function () {
        var nome = localStorage.getItem('nome')
        var profissao = localStorage.getItem('profissao')
        var celular = localStorage.getItem('celular')
        var ip = localStorage.getItem('ip')

        if (nome !== null) {
          $('#nome').val(nome)
        }
        if (profissao !== null) {
          $('#profissao').val(profissao)
        }
        if (celular !== null) {
          $('#celular').val(celular)
        }
        if (ip !== null) {
          $('#ip').val(ip)
        }
      })

      function salvar() {
        localStorage.setItem('profissao', $('#profissao').val())
        localStorage.setItem('nome', $('#nome').val())
        localStorage.setItem('celular', $('#celular').val())
        localStorage.setItem('ip', $('#ip').val())
        alert('Registro salvo!')
      }

      function fazerRequisicao() {
        var url = 'https://ip-fast.com/api/ip/' //Sua URL

        var xhttp = new XMLHttpRequest()
        xhttp.open('GET', url, false)
        xhttp.send() //A execução do script pára aqui até a requisição retornar do servidor

        document.getElementById('ip').value = xhttp.responseText
      }
    </script>
  </body>
</html>
